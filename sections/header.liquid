{%- liquid
  assign animation_name = 'drawer-items-fade'
  assign animation_duration = 500
  assign animation_delay_increment = 50

  assign transparent_header = false
  if template contains 'collection' and collection.image and section.settings.transparent_collection
    assign transparent_header = true
  elsif template contains 'article' and article.image and section.settings.transparent_article
    assign transparent_header = true
  elsif template == 'index' and section.settings.transparent_home
    assign transparent_header = true
  elsif template.name == 'page' and section.settings.transparent_page
    assign transparent_header = true
  endif

  if section.settings.main_menu_linklist != blank
    assign main_menu_linklist = section.settings.main_menu_linklist
  else
    assign main_menu_linklist = 'main-menu'
  endif

  assign secondary_menu_linklist = section.settings.secondary_menu_linklist
  assign tertiary_menu_linklist = section.settings.tertiary_menu_linklist

  assign logo = section.settings.logo
  assign transparent_logo = section.settings.transparent_logo

  if transparent_logo != blank and logo == blank
    assign logo = transparent_logo
  endif

  if logo != blank
    assign logo_denom = logo.aspect_ratio | default: 1
    assign logo_height = section.settings.logo_max_limit | divided_by: logo_denom
    assign menu_height = logo_height | floor | plus: 30
    assign logo_width = section.settings.logo_max_limit
    assign logo_width_x2 = logo_width | times: 2
    assign logo_width_value = logo_width | append: 'px'
    assign logo_padding = 1 | divided_by: logo_denom | times: 100 | append: '%'
  else
    assign menu_height = 80
    assign logo_width = 'auto'
  endif

  if section.settings.header_style contains 'logo_above'
    assign menu_height = menu_height | plus: 51
  endif

  assign cart_item_count = cart.item_count
  assign cart_icon_as_circle = section.settings.icon_as_circle

  if cart_item_count > 9
    assign cart_item_count = '9+'
  endif

  assign cart_icon_family = section.settings.cart_icon_family
  assign show_icons = section.settings.show_icons
  assign icon_string_cart = 'icon-' | append: cart_icon_family

  capture navlink_cart_classes
    echo 'navlink--cart'

    if cart_icon_as_circle
      echo ' navlink--cart--circle'
    endif

    if cart_icon_as_circle == false and show_icons
      echo ' navlink--cart--icon'
    elsif cart_icon_as_circle == false and show_icons == false
      echo ' navlink--cart--text'
    endif

    if show_icons == false
      echo ' navlink--toplevel'
    endif
  endcapture

  assign highlight_item = section.settings.highlight_item
  assign highlight_item_color = section.settings.highlight_item_color

  capture highlight_style
    if highlight_item_color != 'rgba(0,0,0,0)' and highlight_item_color != ''
      echo 'style="--highlight: ' | append: highlight_item_color | append: ';"'
    endif
  endcapture

  assign languages = false
  assign currencies = false
  assign header_popouts = false

  if section.settings.show_locale_selector and shop.published_locales.size > 1
    assign languages = true
  endif

  if section.settings.show_currency_selector and shop.enabled_currencies.size > 1
    assign currencies = true
  endif

  if languages or currencies
    assign header_popouts = true
  endif
-%}

{%- if section.settings.show_social_icons -%}
  {%- if settings.instagram_link != ''
    or settings.pinterest_link != ''
    or settings.facebook_link != ''
    or settings.twitter_link != ''
    or settings.youtube_link != ''
    or settings.tiktok_link != ''
    or settings.linkedin_link != ''
    or settings.vimeo_link != ''
    or settings.tumblr_link != ''
    or settings.snapchat_link != ''
    or settings.feed_link != '' -%}
    {%- assign social = true -%}
  {%- endif -%}
{%- endif -%}

{%- style -%}
  :root {
    --menu-height: calc({{ menu_height }}px);

    {%- if cart_icon_family == 'bag' -%}
      --icon-add-cart: var(--ICON-ADD-BAG);
    {%- else -%}
      --icon-add-cart: var(--ICON-ADD-CART);
    {%- endif -%}
  }
  {%- if logo != blank -%}
    .header__logo__link::before { padding-bottom: {{ logo_padding }}; }
  {%- endif -%}

  {%- if transparent_header -%}
    .main-content > .section-fullscreen:first-of-type { --header-padding: {{ menu_height }}px; }
  {%- else -%}
    .main-content > .shopify-section:first-of-type .backdrop--linear:before { display: none; }
  {%- endif -%}
{%- endstyle -%}

{%- capture logos -%}
  {%- if transparent_header and transparent_logo != blank and logo != blank -%}
    {%- assign has_transparent_logo = true -%}
  {%- endif -%}
  <div class="header__logo{% if logo %} header__logo--image{% endif %}{% if has_transparent_logo %} header__logo--has-transparent{% endif %}">
    <a class="header__logo__link"
        href="{{ routes.root_url }}"
        {% if logo_width_value %}
          style="width: {{ logo_width_value }};"
        {% endif %}>
      {%- if logo != blank -%}
        {%- liquid
          assign alt = logo.alt | default: shop.name | strip_html | escape
          assign width = logo_width_x2
          assign sizes = logo_width | append: 'px'
          assign widths = logo_width | append: ',' | append: logo_width_x2
          render 'image' image: logo, width: width, sizes: sizes, widths: widths, alt: alt, modifier: 'logo__img logo__img--color', loading: 'eager', fetchpriority: 'high', preload: 'true', show_backfill: false
        -%}
      {%- else -%}
        {%- liquid
          assign classes = ''
          assign title_length = shop.name | size
          assign oneword = true
          if shop.name contains ' ' or shop.name contains '-'
            assign oneword = false
          endif
          if title_length > 15
            assign classes = classes | append: ' header__logo__text--long'
            if oneword
              assign classes = classes | append: ' header__logo__text--break'
            endif
          endif
        -%}
        <div class="header__logo__text {{ classes }}">
          <span>{{ shop.name }}</span>
        </div>
      {%- endif -%}

      {%- liquid
        if has_transparent_logo
          assign alt = transparent_logo.alt | default: shop.name | strip_html | escape
          assign width = logo_width_x2
          assign sizes = logo_width | append: 'px'
          assign widths = logo_width | append: ',' | append: logo_width_x2
          render 'image' image: transparent_logo, width: width, sizes: sizes, widths: widths, alt: alt, modifier: 'logo__img logo__img--transparent', loading: 'eager', fetchpriority: 'high', preload: 'true', show_backfill: false
        endif
      -%}
    </a>
  </div>
{%- endcapture -%}

{%- capture cart_status -%}
  <div class="navlink__cart__content">
    <span class="{% if show_icons == false %}navtext{% else %}visually-hidden{% endif %}">Cart</span>

    <span class="header__cart__status__holder">
      <span class="header__cart__status{% if show_icons == false %} navtext{% endif %}" data-status-separator=": " data-cart-count="{{ cart.item_count }}">
        {{ cart_item_count }}
      </span>

      {%- if cart_icon_as_circle == false -%}
        {%- render 'header-icon', filename: icon_string_cart -%}
      {%- endif -%}
    </span>
  </div>
{%- endcapture -%}

{%- capture minimal -%}
  <div class="header__mobile__left">
    <div class="header__mobile__button">
      <button class="header__mobile__hamburger{% if show_icons == false %} navlink navlink--toplevel{% endif %}{% if settings.type_nav_caps %} caps{% endif %}"
        data-mobile-menu-toggle
        aria-label="Show menu"
        aria-haspopup="true"
        aria-expanded="false"
        aria-controls="mobile-menu">

        {%- if show_icons == false -%}
          <small class="navtext navtext--menu">Menu</small>
          <small class="navtext navtext--close">Close</small>
        {%- endif -%}

        <span class="icon-menu">
          {%- render 'icon-menu' -%}
        </span>
        <span class="icon-close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </span>
      </button>
    </div>
    {%- if section.settings.enable_search -%}
      <div class="header__mobile__button{% if settings.type_nav_caps %} caps{% endif %}">
        <header-search-popdown>
          <details>
            <summary class="navlink navlink--search{% if show_icons == false %} navlink--toplevel{% endif %}" aria-haspopup="dialog" data-popdown-toggle title="Search">
              {%- render 'icon-search' -%}
              {%- render 'icon-cancel' -%}
              <span class="{% if show_icons == false %}navtext{% else %}visually-hidden{% endif %}">Search</span>
            </summary>

            {%- render 'header-search-popdown', unique: 'mobile' -%}

            <span class="drawer__underlay" data-popdown-underlay></span>
          </details>
        </header-search-popdown>
      </div>
    {%- endif -%}
  </div>

  {{ logos }}

  <div class="header__mobile__right{% if settings.type_nav_caps %} caps{% endif %}">
    {%- if header_popouts -%}
      <div class="header__mobile__button desktop">
        {%- render 'localization' section: section, class: 'header', uniq_id: 'header-mobile-top', short_country_name: true, position_reverse: true -%}
      </div>
    {%- endif -%}

    {%- if shop.customer_accounts_enabled -%}
      <div class="header__mobile__button">
        <a href="{{ routes.account_url }}" class="navlink{% if show_icons == false %} navlink--toplevel{% endif %}">
          {%- render 'icon-profile-circled' -%}
          <span class="{% if show_icons == false %}navtext{% else %}visually-hidden{% endif %}">Account</span>
        </a>
      </div>
    {%- endif -%}
    <div class="header__mobile__button">
      <a href="{{ routes.cart_url }}" class="navlink {{ navlink_cart_classes }}" {% if settings.enable_cart_dropdown and template.name != 'cart' %} data-cart-toggle {% endif %}>
        {{ cart_status }}
      </a>
    </div>
  </div>

  {%- if tertiary_menu_linklist != blank and linklists[tertiary_menu_linklist].links.size > 0 -%}
    <div class="header__mobile__bottom">
      <nav class="header__mobile__nav{% if settings.type_nav_caps %} caps{% endif %}" data-mobile-nav>
        <div class="header__mobile__nav__scroller">
          {%- for link in linklists[tertiary_menu_linklist].links -%}
            <a class="navlink" href="{{ link.url }}">
              <span class="navtext">{{ link.title }}</span>
            </a>
          {%- endfor -%}
        </div>
      </nav>
    </div>
  {%- endif -%}
{%- endcapture -%}

{%- capture buttons -%}
  <div class="header__desktop__buttons{% if show_icons == false %} header__desktop__buttons--text{% else %} header__desktop__buttons--icons{% endif %}{% if settings.type_nav_caps %} caps{% endif %}">
    {%- if social and section.settings.header_style != 'logo_above' -%}
      <div class="header__desktop__button">
        {%- render 'social' -%}
      </div>
    {%- endif -%}

    {%- if header_popouts -%}
      <div class="header__desktop__button">
        {%- render 'localization' section: section, class: 'header', uniq_id: 'header-desktop', short_country_name: true, position_reverse: true -%}
      </div>
    {%- endif -%}

    {%- if shop.customer_accounts_enabled -%}
      <div class="header__desktop__button">
        <a href="{{ routes.account_url }}" class="navlink{% if show_icons == false %} navlink--toplevel{% endif %}" title="Account">
          {%- render 'icon-profile-circled' -%}
          <span class="{% if show_icons == false %}navtext{% else %}visually-hidden{% endif %}">Account</span>
        </a>
      </div>
    {%- endif -%}

    {%- if section.settings.enable_search -%}
      <div class="header__desktop__button">
        <header-search-popdown>
          <details>
            <summary class="navlink navlink--search{% if show_icons == false %} navlink--toplevel{% endif %}" aria-haspopup="dialog" data-popdown-toggle title="Search">
              {%- render 'icon-search' -%}
              {%- render 'icon-cancel' -%}
              <span class="{% if show_icons == false %}navtext{% else %}visually-hidden{% endif %}">Search</span>
            </summary>

            {%- render 'header-search-popdown', unique: 'desktop' -%}

            <span class="drawer__underlay" data-popdown-underlay></span>
          </details>
        </header-search-popdown>
      </div>
    {%- endif -%}

    <div class="header__desktop__button">
      <a href="{{ routes.cart_url }}" class="navlink {{ navlink_cart_classes }}" title="Cart" {% if settings.enable_cart_dropdown and template.name != 'cart' %} data-cart-toggle{% endif %}>
        {{ cart_status }}
      </a>
    </div>
  </div>
{%- endcapture -%}

{%- capture menu -%}
  <nav class="header__menu{% if settings.type_nav_caps %} caps{% endif %}">
    {%- for link in linklists[main_menu_linklist].links -%}
      {%- render 'nav-item', link: link, section: section, index: forloop.index, highlight_item: highlight_item -%}
    {%- endfor -%}

    <div class="hover__bar"></div>

    <div class="hover__bg"></div>
  </nav>
{%- endcapture -%}

<div class="header__wrapper"
  data-header-wrapper
  data-header-transparent="{{ transparent_header }}"
  {% if section.settings.header_sticky %}data-header-sticky{% endif %}
  data-header-style="{{ section.settings.header_style }}"
  data-section-id="{{ section.id }}"
  data-section-type="header"
  {{ highlight_style }}>

  <header class="theme__header" role="banner" data-header-height>
    <div class="header__mobile">
      {{ minimal }}
    </div>

    <div class="header__desktop" data-header-desktop>
      {%- case section.settings.header_style -%}
        {%- when 'logo_beside' -%}
          <div class="header__desktop__upper" data-takes-space-wrapper>
            <div data-child-takes-space class="header__desktop__bar__l">{{ logos }}</div>

            <div data-child-takes-space class="header__desktop__bar__c">{{ menu }}</div>

            <div data-child-takes-space class="header__desktop__bar__r">{{ buttons }}</div>
          </div>
        {%- when 'logo_center_menu_left' -%}
          <div class="header__desktop__upper header__desktop__upper--reverse" data-takes-space-wrapper>
            <div data-child-takes-space class="header__desktop__bar__l">{{ logos }}</div>

            <div data-child-takes-space class="header__desktop__bar__c">{{ menu }}</div>

            <div data-child-takes-space class="header__desktop__bar__r">{{ buttons }}</div>
          </div>
        {%- when 'drawer' -%}
          {%- comment -%} Do nothing for drawer {%- endcomment -%}
        {%- else -%}
          {%- comment -%} 'logo_above' is default case, this covers migrated settings {%- endcomment -%}
          <div class="header__desktop__upper" data-takes-space-wrapper>
            <div data-child-takes-space class="header__desktop__bar__l">
              {%- if social -%}
                {%- render 'social' -%}
              {%- endif -%}
            </div>
            <div data-child-takes-space class="header__desktop__bar__c">{{ logos }}</div>

            <div data-child-takes-space class="header__desktop__bar__r">{{ buttons }}</div>
          </div>
          <div class="header__desktop__lower" data-takes-space-wrapper>
            <div data-child-takes-space class="header__desktop__bar__c">{{ menu }}</div>
          </div>
      {%- endcase -%}
    </div>
  </header>
</div>

{%- comment -%} Mobile Menu Drawer {%- endcomment -%}
<nav id="mobile-menu" class="mobile-menu-drawer" role="dialog" tabindex="-1" data-mobile-menu>
  <div class="mobile-menu-drawer__inner">
    <div class="mobile-menu-drawer__content">
      {%- if linklists[main_menu_linklist].links.size > 0 -%}
        <ul class="mobile-menu">
          {%- for link in linklists[main_menu_linklist].links -%}
            {%- liquid
              assign parent_index = forloop.index
              assign has_sub_menu = false

              if link.links.size > 0
                assign has_sub_menu = true
              endif
            -%}
            <li>
              {%- if has_sub_menu == true -%}
                <details class="link-container">
                  <summary class="parent-link">
                    {{ link.title }}
                    <span>
                      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="9 18 15 12 9 6"></polyline>
                      </svg>
                    </span>
                  </summary>
                  <ul class="sub-menu">
                    <li class="parent-link-back">
                      <button type="button" data-go-back>
                        <span>
                          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="15 18 9 12 15 6"></polyline>
                          </svg>
                        </span>
                        {{ link.title }}
                      </button>
                    </li>
                    {%- for l in link.links -%}
                      {%- liquid
                        assign has_sub_menu_level2 = false
                        if l.links.size > 0
                          assign has_sub_menu_level2 = true
                        endif
                      -%}
                      <li>
                        {%- if has_sub_menu_level2 -%}
                          <details class="link-container">
                            <summary>
                              {{ l.title }}
                              <span>
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                  <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                              </span>
                            </summary>
                            <ul class="sub-menu" tabindex="-1">
                              <li class="parent-link-back">
                                <button type="button" data-go-back>
                                  <span>
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                      <polyline points="15 18 9 12 15 6"></polyline>
                                    </svg>
                                  </span>
                                  {{ l.title }}
                                </button>
                              </li>
                              {%- for sub_link in l.links -%}
                                <li>
                                  <a href="{{ sub_link.url }}" title="{{ sub_link.title | escape }}" role="menuitem">{{ sub_link.title }}</a>
                                </li>
                              {%- endfor -%}
                            </ul>
                          </details>
                        {%- else -%}
                          <a href="{{ l.url }}" title="{{ l.title | escape }}">{{ l.title }}</a>
                        {%- endif -%}
                      </li>
                    {%- endfor -%}
                  </ul>
                </details>
              {%- else -%}
                <a href="{{ link.url }}" title="{{ link.title | escape }}">{{ link.title }}</a>
              {%- endif -%}
            </li>
          {%- endfor -%}
        </ul>
      {%- endif -%}

      {%- if secondary_menu_linklist != blank and linklists[secondary_menu_linklist].links.size > 0 -%}
        <ul class="mobile-secondary-menu">
          {%- for link in linklists[secondary_menu_linklist].links -%}
            <li class="{% if link.active %} active{% endif %}">
              <a href="{{ link.url }}" title="{{ link.title | escape }}">{{ link.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      {%- endif -%}

      {%- if section.settings.mobile_promo_image -%}
        <div class="mega-menu-promotion">
          {%- if section.settings.mobile_promo_link -%}<a href="{{ section.settings.mobile_promo_link }}">{%- endif -%}
            {%- render 'image', image: section.settings.mobile_promo_image, width: 670 -%}
          {%- if section.settings.mobile_promo_link -%}</a>{%- endif -%}
          <div class="mega-menu-promotion__cover">
            {%- if section.settings.mobile_promo_heading -%}<p class="heading-font">{{ section.settings.mobile_promo_heading }}</p>{%- endif -%}
            {%- if section.settings.mobile_promo_link_label -%}<a href="{{ section.settings.mobile_promo_link }}" class="text-button white">{{ section.settings.mobile_promo_link_label }}</a>{%- endif -%}
          </div>
        </div>
      {%- endif -%}
    </div>

    <div class="mobile-menu-drawer__footer">
      <div class="mobile-menu-social">
        {%- if settings.facebook_link != blank -%}
          <a href="{{ settings.facebook_link }}" target="_blank" rel="noopener noreferrer" title="Facebook" class="social-link"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg></a>
        {%- endif -%}
        {%- if settings.instagram_link != blank -%}
          <a href="{{ settings.instagram_link }}" target="_blank" rel="noopener noreferrer" title="Instagram" class="social-link"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg></a>
        {%- endif -%}
        {%- if settings.twitter_link != blank -%}
          <a href="{{ settings.twitter_link }}" target="_blank" rel="noopener noreferrer" title="Twitter" class="social-link"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a>
        {%- endif -%}
        {%- if settings.pinterest_link != blank -%}
          <a href="{{ settings.pinterest_link }}" target="_blank" rel="noopener noreferrer" title="Pinterest" class="social-link"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.373 0 12c0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738.098.119.112.224.083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.631-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24 12 24c6.627 0 12-5.373 12-12S18.627 0 12 0z"></path></svg></a>
        {%- endif -%}
        {%- if settings.youtube_link != blank -%}
          <a href="{{ settings.youtube_link }}" target="_blank" rel="noopener noreferrer" title="YouTube" class="social-link"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a>
        {%- endif -%}
        {%- if settings.tiktok_link != blank -%}
          <a href="{{ settings.tiktok_link }}" target="_blank" rel="noopener noreferrer" title="TikTok" class="social-link"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"></path></svg></a>
        {%- endif -%}
        {%- if settings.linkedin_link != blank -%}
          <a href="{{ settings.linkedin_link }}" target="_blank" rel="noopener noreferrer" title="LinkedIn" class="social-link"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a>
        {%- endif -%}
      </div>
      
      {%- if header_popouts -%}
        <div class="no-js-hidden mobile-menu-localization">
          {%- render 'localization' section: section, class: 'header', uniq_id: 'MobileMenuLocalization', short_country_name: true -%}
        </div>
      {%- endif -%}
    </div>
  </div>
</nav>

<div class="mobile-menu-overlay" data-mobile-menu-overlay></div>

<div class="header__backfill"
  data-header-backfill
  style="height: var(--menu-height);{% if transparent_header %}display: none;{% endif %}"></div>

<style>
  /* =====================================================
     FIX HEADER WHITE SPACE - TARGET INTERNAL ELEMENTS
     ===================================================== */
  
  /* CRITICAL: Override theme.css - must come after theme.css loads */
  .header__wrapper,
  .header__wrapper.header__wrapper {
    position: relative !important;
    z-index: 100000 !important;
    height: fit-content !important;
    min-height: fit-content !important;
    max-height: none !important;
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
    padding-top: 0 !important;
    margin-top: 0 !important;
    overflow: visible !important;
    display: block !important;
    line-height: 0 !important;
  }
  
  /* Ensure header wrapper only takes space of its content */
  .header__wrapper > * {
    line-height: normal;
  }
  
  /* Remove any spacing from data attributes */
  [data-header-height],
  [data-header-wrapper] {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  /* Reset theme header - CRITICAL FIX - Override absolute positioning */
  .header__wrapper .theme__header,
  .header__wrapper .theme__header.theme__header,
  .theme__header[data-header-height] {
    position: relative !important;
    background: var(--COLOR-BG) !important;
    height: auto !important;
    min-height: 0 !important;
    max-height: none !important;
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
    padding-top: 0 !important;
    margin-top: 0 !important;
    line-height: normal !important;
    width: 100% !important;
  }
  
  /* CRITICAL: Remove any pseudo-elements that might add space */
  .header__wrapper .theme__header::before,
  .header__wrapper .theme__header::after {
    display: none !important;
    height: 0 !important;
    max-height: 0 !important;
    min-height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    content: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    position: absolute !important;
    top: 0 !important;
    bottom: auto !important;
  }
  
  /* Fix header desktop upper and lower rows */
  .header__wrapper .header__desktop__upper,
  .header__wrapper .header__desktop__lower {
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
    height: auto !important;
    min-height: 0 !important;
  }
  
  /* Fix header desktop bars */
  .header__wrapper .header__desktop__bar__l,
  .header__wrapper .header__desktop__bar__c,
  .header__wrapper .header__desktop__bar__r {
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
  }
  
  /* Fix mobile header */
  .header__wrapper .header__mobile {
    height: auto !important;
    min-height: 0 !important;
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
  }
  
  /* Fix desktop header */
  .header__wrapper .header__desktop {
    height: auto !important;
    min-height: 0 !important;
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
  }
  
  /* Fix desktop upper row */
  .header__wrapper .header__desktop__upper {
    height: auto !important;
    min-height: 0 !important;
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
  }
  
  /* Fix desktop lower row */
  .header__wrapper .header__desktop__lower {
    height: auto !important;
    min-height: 0 !important;
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
  }
  
  /* CRITICAL: Hide hover__bg which creates the white space */
  .header__wrapper .hover__bg {
    display: none !important;
    height: 0 !important;
    min-height: 0 !important;
    max-height: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
    opacity: 0 !important;
    visibility: hidden !important;
    position: absolute !important;
    pointer-events: none !important;
    top: 0 !important;
    bottom: auto !important;
  }
  
  /* Ensure hover__bg doesn't create any space */
  .header__wrapper .header__menu .hover__bg {
    position: absolute !important;
    top: 0 !important;
    bottom: auto !important;
    left: 0 !important;
    right: 0 !important;
    height: 0 !important;
    width: 0 !important;
  }
  
  /* Fix header menu */
  .header__wrapper .header__menu {
    height: auto !important;
    min-height: 0 !important;
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
    position: relative !important;
  }
  
  /* Fix hover bar */
  .header__wrapper .hover__bar {
    position: absolute !important;
    bottom: 0 !important;
    height: 2px !important;
    min-height: 0 !important;
  }
  
  /* Fix any nav-item dropdowns that might add height */
  .header__wrapper .navlink--has-dropdown::after,
  .header__wrapper .header__dropdown {
    position: absolute !important;
  }
  
  /* Fix page header wrapper */
  .page-header {
    height: auto !important;
    min-height: 0 !important;
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  /* Fix header sections container */
  .header-sections .page-header {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  /* Remove any spacing from header sections */
  .header-sections {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  /* CRITICAL: Remove section-padding from all header sections */
  .header-sections .section-padding,
  .header-sections [class*="section-padding"],
  .header-sections .announcement__wrapper.section-padding {
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
  }
  
  /* Remove padding from announcement bar in header */
  .header-sections .announcement__wrapper,
  .header-sections .announcement__bar-outer,
  .header-sections #announcement {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  /* Ensure no spacing between header and content */
  .header-sections + *,
  .header__wrapper + *,
  .header__backfill + * {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
  
  /* Remove any bottom spacing from header group */
  .header-sections:last-child,
  .header__wrapper:last-child,
  .header__backfill:last-child {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  /* Ensure container doesn't add space */
  .container > .header-sections {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  /* Fix header backfill - CRITICAL */
  /* Since header is now relative, backfill should match header height exactly */
  .header__backfill,
  .header__backfill[data-header-backfill] {
    margin: 0 !important;
    padding: 0 !important;
    height: var(--menu-height) !important;
    max-height: var(--menu-height) !important;
    min-height: var(--menu-height) !important;
    line-height: 0 !important;
    display: block !important;
    overflow: hidden !important;
    position: relative !important;
    box-sizing: border-box !important;
    font-size: 0 !important;
    vertical-align: top !important;
  }
  
  /* Ensure backfill doesn't add extra space below header */
  .header__wrapper ~ .header__backfill {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
  
  /* Ensure backfill doesn't create extra space */
  .header__backfill::before,
  .header__backfill::after {
    display: none !important;
    height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    content: none !important;
  }
  
  /* If header is relative, backfill should match exactly without extra space */
  .header__wrapper + .header__backfill {
    margin-top: 0 !important;
    padding-top: 0 !important;
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  /* Ensure no gap between header wrapper and backfill */
  .header__wrapper + .header__backfill,
  .header__backfill {
    vertical-align: top !important;
  }
  
  /* Fix all header child elements */
  .header__wrapper > *,
  .header__wrapper .theme__header > *,
  .header__wrapper .header__mobile > *,
  .header__wrapper .header__desktop > *,
  .header__wrapper .header__desktop__upper > *,
  .header__wrapper .header__desktop__lower > *,
  .header__wrapper .header__desktop__bar__l,
  .header__wrapper .header__desktop__bar__c,
  .header__wrapper .header__desktop__bar__r,
  .header__wrapper [data-header-height],
  .header__wrapper [data-header-desktop],
  .header__wrapper [data-takes-space-wrapper] {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  /* Fix all nested elements */
  .header__wrapper * {
    box-sizing: border-box;
  }
  
  /* Remove any line-height that might add space - but allow content to have normal line-height */
  .header__wrapper {
    line-height: 0 !important;
    font-size: 0 !important;
  }
  
  .header__wrapper > * {
    line-height: normal !important;
    font-size: initial !important;
  }
  
  .header__wrapper .theme__header {
    line-height: normal !important;
    font-size: initial !important;
  }
  
  /* Fix header sections wrapper */
  .header-sections {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  /* CRITICAL FIX: Override section-padding for all sections in header group */
  .header-sections section,
  .header-sections [data-section-type],
  .header-sections .section-padding,
  .header-sections *[class*="section-padding"] {
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
    --padding-bottom: 0 !important;
    --PB: 0 !important;
  }
  
  /* Remove padding from announcement specifically */
  .header-sections .announcement__wrapper,
  .header-sections .announcement__wrapper.section-padding,
  .header-sections #announcement {
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    --padding-top: 0 !important;
    --padding-bottom: 0 !important;
    --PT: 0 !important;
    --PB: 0 !important;
  }
  
  /* Remove padding from all announcement child elements */
  .header-sections .announcement__bar-outer,
  .header-sections .announcement__bar,
  .header-sections .announcement__bar-holder {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  /* Ensure no extra spacing after header */
  .header__wrapper::after,
  .header__wrapper::before {
    content: none !important;
    display: none !important;
    height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  
  /* Fix container spacing */
  .container .header-sections {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  /* Ensure header sections don't add space */
  .header-sections::after {
    content: none !important;
    display: none !important;
    height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  
  /* Sticky header */
  [data-header-sticky] {
    position: sticky;
    top: 0;
  }

  /* =====================================================
     MOBILE MENU DRAWER STYLES
     ===================================================== */
  
  #mobile-menu.mobile-menu-drawer {
    position: fixed;
    top: var(--menu-height);
    left: 0;
    width: 100%;
    height: calc(100vh - var(--menu-height));
    height: calc(100dvh - var(--menu-height));
    background: var(--COLOR-BG);
    border-top: 1px solid var(--COLOR-BORDER);
    opacity: 0;
    visibility: hidden;
    z-index: 99999;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transform: translateY(-20px);
    transition: transform 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
  }

  #mobile-menu.mobile-menu-drawer.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .mobile-menu-drawer__inner {
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 100%;
    overflow: hidden;
  }

  .mobile-menu-drawer__content {
    flex: 1;
    overflow-x: hidden;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    position: relative;
  }

  .mobile-menu-drawer__footer {
    flex-shrink: 0;
    padding: 15px;
    background: var(--COLOR-BG);
    border-top: 1px solid var(--COLOR-BORDER);
  }

  @media only screen and (min-width: 768px) {
    .mobile-menu-drawer__footer {
      padding: 20px 50px;
    }
  }

  .mobile-menu-drawer__footer .mobile-menu-social {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
  }

  .mobile-menu-drawer__footer .social-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--COLOR-TEXT);
    color: var(--COLOR-BG);
    transition: opacity 0.2s ease, transform 0.2s ease;
  }

  .mobile-menu-drawer__footer .social-link:hover {
    opacity: 0.8;
    transform: scale(1.1);
  }

  .mobile-menu-drawer__footer .social-link svg {
    width: 18px;
    height: 18px;
  }

  .mobile-menu-drawer__footer .mobile-menu-localization {
    margin-top: 15px;
  }

  .mobile-menu-drawer .mega-menu-promotion {
    width: 100%;
    position: relative;
    padding: 0 15px;
    margin-bottom: 20px;
  }

  @media only screen and (min-width: 768px) {
    .mobile-menu-drawer .mega-menu-promotion {
      padding: 0 50px;
    }
  }

  .mobile-menu-drawer .mega-menu-promotion__cover {
    padding: 15px 0;
  }

  .mobile-menu-drawer .mobile-menu {
    list-style: none;
    margin: 0;
    width: 100%;
    padding: 0 15px;
  }

  @media only screen and (min-width: 768px) {
    .mobile-menu-drawer .mobile-menu {
      padding: 0 50px;
    }
  }

  .mobile-menu-drawer .mobile-menu > li > a,
  .mobile-menu-drawer .mobile-menu > li > details > summary {
    display: flex;
    align-items: center;
    min-height: 55px;
    padding: 5px 0;
    font-size: 1.25rem;
    letter-spacing: 0.02em;
    border-bottom: 1px solid var(--COLOR-BORDER);
    color: var(--COLOR-TEXT);
    cursor: pointer;
    text-decoration: none;
  }

  .mobile-menu-drawer .mobile-menu li summary span {
    height: 100%;
    display: flex;
    align-items: center;
  }

  .mobile-menu-drawer .mobile-menu li summary span svg {
    width: 12px;
    height: 12px;
  }

  .mobile-menu-drawer .mobile-menu li .link-container summary {
    width: 100%;
    justify-content: space-between;
    list-style: none;
  }

  .mobile-menu-drawer .mobile-menu li .link-container summary::-webkit-details-marker {
    display: none;
  }

  .mobile-menu-drawer .mobile-menu li .link-container[open].menu-opening > .sub-menu {
    transform: translateX(0);
    visibility: visible;
  }

  .mobile-menu-drawer .mobile-menu .parent-link-back button {
    width: 100%;
    font-size: 0.875rem;
    height: 50px;
    display: flex;
    align-items: center;
    color: var(--COLOR-TEXT);
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
  }

  .mobile-menu-drawer .mobile-menu .parent-link-back button span {
    display: flex;
    align-items: center;
  }

  .mobile-menu-drawer .mobile-menu .parent-link-back button svg {
    margin-right: 10px;
    width: 12px;
    height: 12px;
  }

  .mobile-menu-drawer .mobile-menu .sub-menu {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 10;
    background: var(--COLOR-BG);
    transform: translateX(100%);
    margin-left: 0;
    list-style: none;
    padding: 0 15px;
    visibility: hidden;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    transition: transform 0.25s cubic-bezier(0.104, 0.204, 0.492, 1), visibility 0.25s;
  }

  @media only screen and (min-width: 768px) {
    .mobile-menu-drawer .mobile-menu .sub-menu {
      padding: 0 50px;
    }
  }

  .mobile-menu-drawer .mobile-menu .sub-menu .sub-menu {
    z-index: 12;
  }

  .mobile-menu-drawer .mobile-menu .sub-menu li a,
  .mobile-menu-drawer .mobile-menu .sub-menu li summary {
    display: flex;
    align-items: center;
    min-height: 50px;
    padding: 5px 0;
    font-size: 1rem;
    border-bottom: 1px solid var(--COLOR-BORDER);
    color: var(--COLOR-TEXT);
    text-decoration: none;
    justify-content: space-between;
  }

  .mobile-menu-drawer .mobile-secondary-menu {
    list-style: none;
    margin: 20px 0;
    font-size: 0.875rem;
    padding: 0 15px;
  }

  @media only screen and (min-width: 768px) {
    .mobile-menu-drawer .mobile-secondary-menu {
      padding: 0 50px;
    }
  }

  .mobile-menu-drawer .mobile-secondary-menu li {
    margin-bottom: 10px;
  }

  .mobile-menu-drawer .mobile-secondary-menu a {
    display: block;
    font-size: inherit;
    color: var(--COLOR-TEXT);
    text-decoration: none;
  }

  /* Overlay */
  .mobile-menu-overlay {
    position: fixed;
    top: var(--menu-height);
    left: 0;
    width: 100%;
    height: calc(100vh - var(--menu-height));
    height: calc(100dvh - var(--menu-height));
    background: rgba(0, 0, 0, 0.5);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
    z-index: 99998;
    pointer-events: none;
  }

  .mobile-menu-overlay.active {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }

  /* Hamburger button */
  .header__mobile__hamburger .icon-menu {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .header__mobile__hamburger .icon-close {
    display: none;
    align-items: center;
    justify-content: center;
  }

  .header__mobile__hamburger[aria-expanded="true"] .icon-menu {
    display: none;
  }

  .header__mobile__hamburger[aria-expanded="true"] .icon-close {
    display: flex;
  }

  .header__mobile__hamburger .navtext--menu {
    display: block;
  }

  .header__mobile__hamburger .navtext--close {
    display: none;
  }

  .header__mobile__hamburger[aria-expanded="true"] .navtext--menu {
    display: none;
  }

  .header__mobile__hamburger[aria-expanded="true"] .navtext--close {
    display: block;
  }

  /* Body scroll lock */
  body.mobile-menu-open {
    overflow: hidden;
    position: fixed;
    width: 100%;
    height: 100%;
  }

  /* Ensure mobile menu drawer doesn't affect header spacing */
  #mobile-menu.mobile-menu-drawer {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
  
  /* Hide on desktop */
  @media only screen and (min-width: 990px) {
    #mobile-menu.mobile-menu-drawer,
    .mobile-menu-overlay {
      display: none !important;
    }
  }
</style>

<script>
  // CRITICAL: Apply header spacing fix after page loads to ensure it overrides theme.css
  (function() {
    function fixHeaderSpacing() {
      const headerWrapper = document.querySelector('.header__wrapper');
      const themeHeader = document.querySelector('.theme__header');
      const headerBackfill = document.querySelector('.header__backfill');
      
      if (headerWrapper) {
        headerWrapper.style.setProperty('margin-bottom', '0', 'important');
        headerWrapper.style.setProperty('padding-bottom', '0', 'important');
        headerWrapper.style.setProperty('height', 'fit-content', 'important');
        headerWrapper.style.setProperty('min-height', 'fit-content', 'important');
      }
      
      if (themeHeader) {
        themeHeader.style.setProperty('position', 'relative', 'important');
        themeHeader.style.setProperty('margin-bottom', '0', 'important');
        themeHeader.style.setProperty('padding-bottom', '0', 'important');
        themeHeader.style.setProperty('height', 'auto', 'important');
        themeHeader.style.setProperty('min-height', '0', 'important');
      }
      
      if (headerBackfill) {
        headerBackfill.style.setProperty('margin-bottom', '0', 'important');
        headerBackfill.style.setProperty('padding-bottom', '0', 'important');
        headerBackfill.style.setProperty('margin-top', '0', 'important');
        headerBackfill.style.setProperty('padding-top', '0', 'important');
      }
      
      // Fix all header sections
      const headerSections = document.querySelectorAll('.header-sections > *');
      headerSections.forEach(function(section) {
        section.style.setProperty('margin-bottom', '0', 'important');
        section.style.setProperty('padding-bottom', '0', 'important');
      });
    }
    
    // Run immediately
    fixHeaderSpacing();
    
    // Run after DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', fixHeaderSpacing);
    } else {
      fixHeaderSpacing();
    }
    
    // Run after window loads
    window.addEventListener('load', fixHeaderSpacing);
    
    // Run after a short delay to ensure all CSS has loaded
    setTimeout(fixHeaderSpacing, 100);
  })();
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuToggle = document.querySelector('[data-mobile-menu-toggle]');
    const mobileMenu = document.getElementById('mobile-menu');
    const mobileMenuOverlay = document.querySelector('[data-mobile-menu-overlay]');
    const body = document.body;

    if (!mobileMenuToggle || !mobileMenu) return;

    let scrollPosition = 0;

    mobileMenuToggle.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      const isOpen = mobileMenu.classList.contains('active');
      
      if (isOpen) {
        closeMobileMenu();
      } else {
        openMobileMenu();
      }
    });

    if (mobileMenuOverlay) {
      mobileMenuOverlay.addEventListener('click', function(e) {
        e.preventDefault();
        closeMobileMenu();
      });
    }

    function openMobileMenu() {
      scrollPosition = window.pageYOffset;
      mobileMenu.classList.add('active');
      if (mobileMenuOverlay) mobileMenuOverlay.classList.add('active');
      mobileMenuToggle.setAttribute('aria-expanded', 'true');
      mobileMenuToggle.setAttribute('aria-label', 'Close menu');
      body.classList.add('mobile-menu-open');
      body.style.top = `-${scrollPosition}px`;
    }

    function closeMobileMenu() {
      mobileMenu.classList.remove('active');
      if (mobileMenuOverlay) mobileMenuOverlay.classList.remove('active');
      mobileMenuToggle.setAttribute('aria-expanded', 'false');
      mobileMenuToggle.setAttribute('aria-label', 'Show menu');
      body.classList.remove('mobile-menu-open');
      body.style.top = '';
      window.scrollTo(0, scrollPosition);
      
      const openDetails = mobileMenu.querySelectorAll('details[open]');
      openDetails.forEach(detail => {
        detail.removeAttribute('open');
        detail.classList.remove('menu-opening');
      });

      const menuContent = mobileMenu.querySelector('.mobile-menu-drawer__content');
      if (menuContent) {
        menuContent.scrollTop = 0;
      }
    }

    const linkContainers = mobileMenu.querySelectorAll('.link-container');
    
    linkContainers.forEach(container => {
      const summary = container.querySelector('summary');
      
      if (summary) {
        summary.addEventListener('click', function(e) {
          e.preventDefault();
          container.setAttribute('open', '');
          requestAnimationFrame(() => {
            container.classList.add('menu-opening');
          });
        });
      }
    });

    const backButtons = mobileMenu.querySelectorAll('[data-go-back]');
    
    backButtons.forEach(button => {
      button.addEventListener('click', function(e) {
        e.preventDefault();
        const parentDetails = this.closest('details');
        
        if (parentDetails) {
          parentDetails.classList.remove('menu-opening');
          setTimeout(() => {
            parentDetails.removeAttribute('open');
          }, 250);
        }
      });
    });

    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && mobileMenu.classList.contains('active')) {
        closeMobileMenu();
      }
    });

    let resizeTimer;
    window.addEventListener('resize', function() {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(function() {
        if (window.innerWidth >= 990 && mobileMenu.classList.contains('active')) {
          closeMobileMenu();
        }
      }, 250);
    });
  });
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": {{ shop.name | json }},
  {% if logo %}
    "logo": {{ logo | image_url: logo.width | prepend: "https:" | json }},
  {% endif %}
  "sameAs": [
    {{ settings.twitter_link | json }},
    {{ settings.facebook_link | json }},
    {{ settings.instagram_link | json }},
    {{ settings.pinterest_link | json }},
    {{ settings.youtube_link | json }},
    {{ settings.tiktok_link | json }},
    {{ settings.linkedin_link | json }},
    {{ settings.vimeo_link | json }},
    {{ settings.snapchat_link | json }},
    {{ settings.tumblr_link | json }},
    {{ settings.feed_link | json }}
  ],
  "url": {{ shop.url | append: page.url | json }}
}
</script>

{%- if template.name == 'index' -%}
  {%- assign potential_action_target = shop.url | append: "/search?q={search_term_string}" -%}
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebSite",
      "name": {{ shop.name | json }},
      "potentialAction": {
        "@type": "SearchAction",
        "target": {{ potential_action_target | json }},
        "query-input": "required name=search_term_string"
      },
      "url": {{ shop.url | append: page.url | json }}
    }
  </script>
{%- endif -%}

{% schema %}
{
  "name": "Header",
  "class": "page-header",
  "settings": [
    {
      "type": "checkbox",
      "id": "header_sticky",
      "label": "Enable sticky header",
      "default": false
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "select",
      "id": "header_style",
      "label": "Header",
      "default": "logo_beside",
      "options": [
        { "value": "logo_above", "label": "Logo above menu"},
        { "value": "logo_beside", "label": "Logo beside menu"},
        { "value": "drawer", "label": "Mobile drawer menu"},
        { "value": "logo_center_menu_left", "label": "Logo center menu left"}
      ]
    },
    {
      "type": "header",
      "content": "Icons"
    },
    {
      "type": "checkbox",
      "id": "show_icons",
      "label": "Show icons",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "icon_as_circle",
      "label": "Show cart icon as circle",
      "default": false
    },
    {
      "type": "select",
      "id": "cart_icon_family",
      "label": "Cart icon",
      "default": "bag",
      "options": [
        { "value": "bag", "label": "Bag"},
        { "value": "cart", "label": "Cart"}
      ]
    },
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Image"
    },
    {
      "type": "range",
      "id": "logo_max_limit",
      "min": 5,
      "max": 495,
      "step": 5,
      "unit": "px",
      "label": "Width",
      "default": 120
    },
    {
      "type": "header",
      "content": "Navigation"
    },
    {
      "type": "link_list",
      "label": "Main menu",
      "id": "main_menu_linklist"
    },
    {
      "type": "checkbox",
      "id": "enable_search",
      "default": true,
      "label": "Show search"
    },
    {
      "type": "checkbox",
      "id": "show_social_icons",
      "default": true,
      "label": "Show social icons"
    },
    {
      "type": "header",
      "content": "language selector",
      "info": "To add a language, go to your [language settings.](/admin/settings/languages)"
    },
    {
      "type": "checkbox",
      "id": "show_locale_selector",
      "label": "Show language selector",
      "default": true
    },
    {
      "type": "header",
      "content": "Currency selector",
      "info": "To add a currency, go to your [payment settings.](/admin/settings/payments)"
    },
    {
      "type": "checkbox",
      "id": "show_currency_selector",
      "label": "Show currency selector",
      "default": true
    },
    {
      "type": "select",
      "id": "type",
      "label": "Type",
      "options": [
        {
          "value": "currency",
          "label": "Currency"
        },
        {
          "value": "country",
          "label": "Country"
        }
      ]
    },
    {
      "type": "header",
      "content": "Highlight link"
    },
    {
      "type": "text",
      "id": "highlight_item",
      "label": "Menu item",
      "default": "Sale"
    },
    {
      "type": "color",
      "id": "highlight_item_color",
      "label": "Color",
      "default": "#D02E2E"
    },
    {
      "type": "header",
      "content": "Transparent header"
    },
    {
      "type": "checkbox",
      "id": "transparent_home",
      "label": "Enable on Home page",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "transparent_collection",
      "label": "Enable on Collection pages",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "transparent_article",
      "label": "Enable on Article pages",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "transparent_page",
      "label": "Enable on Pages",
      "default": false
    },
    {
      "type": "image_picker",
      "id": "transparent_logo",
      "label": "Logo"
    },
    {
      "type": "header",
      "content": "Mobile menu",
      "info": "These menus won't show dropdown items."
    },
    {
      "type": "link_list",
      "id": "secondary_menu_linklist",
      "label": "Secondary menu",
      "info": "Visible in the hamburger menu."
    },
    {
      "type": "link_list",
      "id": "tertiary_menu_linklist",
      "label": "Navigation menu",
      "info": "Visible on mobile below the header."
    },
    {
      "type": "header",
      "content": "Mobile menu promo"
    },
    {
      "type": "image_picker",
      "id": "mobile_promo_image",
      "label": "Promo image"
    },
    {
      "type": "text",
      "id": "mobile_promo_heading",
      "label": "Promo heading"
    },
    {
      "type": "url",
      "id": "mobile_promo_link",
      "label": "Promo link"
    },
    {
      "type": "text",
      "id": "mobile_promo_link_label",
      "label": "Promo link label"
    }
  ],
  "blocks": [
    {
      "name": "Image",
      "type": "image",
      "settings": [
        {
          "type": "select",
          "id": "position",
          "label": "Link position in main menu",
          "default": "1",
          "options": [
            { "value": "1", "label": "Item 1"},
            { "value": "2", "label": "Item 2"},
            { "value": "3", "label": "Item 3"},
            { "value": "4", "label": "Item 4"},
            { "value": "5", "label": "Item 5"},
            { "value": "6", "label": "Item 6"},
            { "value": "7", "label": "Item 7"},
            { "value": "8", "label": "Item 8"},
            { "value": "9", "label": "Item 9"},
            { "value": "10", "label": "Item 10"}
          ]
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "range",
          "id": "aspect_ratio",
          "min": 0.5,
          "max": 1.5,
          "step": 0.1,
          "unit": ":1",
          "label": "Image scaling ratio",
          "info": "Wide to tall",
          "default": 0.5
        },
        {
          "type": "checkbox",
          "id": "wide_image",
          "label": "Wide image",
          "default": true
        },
        {
          "type": "header",
          "content": "Overlay"
        },
        {
          "type": "range",
          "id": "overlay_opacity",
          "label": "Opacity",
          "info": "Increase contrast for legible text.",
          "unit": "%",
          "min": 0,
          "max": 100,
          "step": 5,
          "default": 0
        },
        {
          "type": "color",
          "id": "overlay_color",
          "label": "Overlay color",
          "default": "#000"
        },
        {
          "type": "header",
          "content": "Text"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading"
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "Text"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Color"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text"
        }
      ]
    }
  ],
  "enabled_on": {
    "groups": ["header"]
  }
}
{% endschema %}