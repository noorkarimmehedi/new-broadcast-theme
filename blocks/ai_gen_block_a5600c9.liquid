{% doc %}
  @prompt
    create a section where i will showcase images of testimonial. keep this: Border
    Border width
    
    1
    
    Border color
    
    
    #E0E0E0
    
    Hover border color
    
    
    #CCCCCC
    
    Border radius
    
    8
    
    Shadow
    Horizontal offset
    
    0
    
    Vertical offset
    
    4
    
    Blur radius
    
    8
    
    Shadow opacity
    
    0
    
    
    , if a Testimonial image isn't set from shopify it shuldn't be shown in the home page. there should be on off option. in desktop version 4 images should be in one row , in mobile version there should one image and below that another image.also the desktop version the is so much gap on left and right side reduce that gap, still so much gap on desktop version on left and right side , i need slight gap on left and right side on desktop version , i need just a litttle slightly gap on left and right side on desktop version, i need slight gap on left and right side on desktop version, i need more slight gap on left and right side on desktop version
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-testimonial-showcase-{{ ai_gen_id }} {
    padding: {{ block.settings.section_padding }}px 0;
  }

  .ai-testimonial-showcase__container-{{ ai_gen_id }} {
    max-width: 100%;
    margin: 0 auto;
    padding: 0 35px;
  }

  .ai-testimonial-showcase__heading-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: {{ block.settings.heading_spacing }}px;
    color: {{ block.settings.heading_color }};
    font-size: {{ block.settings.heading_size }}px;
  }

  .ai-testimonial-showcase__grid-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: {{ block.settings.grid_gap }}px;
  }

  .ai-testimonial-showcase__card-{{ ai_gen_id }} {
    position: relative;
    overflow: hidden;
    border: {{ block.settings.border_width }}px solid {{ block.settings.border_color }};
    border-radius: {{ block.settings.border_radius }}px;
    transition: all 0.3s ease;
    box-shadow: {{ block.settings.shadow_horizontal }}px {{ block.settings.shadow_vertical }}px {{ block.settings.shadow_blur }}px rgba(0, 0, 0, {{ block.settings.shadow_opacity }});
  }

  .ai-testimonial-showcase__card-{{ ai_gen_id }}:hover {
    border-color: {{ block.settings.hover_border_color }};
  }

  .ai-testimonial-showcase__image-wrapper-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    padding-bottom: {{ block.settings.image_aspect_ratio }}%;
    overflow: hidden;
  }

  .ai-testimonial-showcase__image-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Mobile Slider Styles */
  .ai-testimonial-showcase__slider-{{ ai_gen_id }} {
    display: none;
    position: relative;
  }

  .ai-testimonial-showcase__slider-wrapper-{{ ai_gen_id }} {
    overflow: hidden;
  }

  .ai-testimonial-showcase__slider-track-{{ ai_gen_id }} {
    display: flex;
    transition: transform 0.3s ease;
  }

  .ai-testimonial-showcase__slide-{{ ai_gen_id }} {
    min-width: 100%;
    padding: 0 5px;
    box-sizing: border-box;
  }

  /* Navigation Container */
  .ai-testimonial-showcase__navigation-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 30px;
    padding: 0 20px;
  }

  .ai-testimonial-showcase__arrow-{{ ai_gen_id }} {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    transition: opacity 0.3s ease;
    flex-shrink: 0;
  }

  .ai-testimonial-showcase__arrow-{{ ai_gen_id }}:hover {
    opacity: 0.7;
  }

  .ai-testimonial-showcase__arrow-{{ ai_gen_id }} svg {
    width: 24px;
    height: 24px;
    fill: #000;
  }

  .ai-testimonial-showcase__dots-{{ ai_gen_id }} {
    display: flex;
    justify-content: center;
    gap: 12px;
    flex-grow: 1;
    margin: 0 20px;
  }

  .ai-testimonial-showcase__dot-{{ ai_gen_id }} {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: transparent;
    border: 2px solid #000;
    padding: 0;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .ai-testimonial-showcase__dot-{{ ai_gen_id }}.active {
    background-color: #000;
  }

  @media screen and (max-width: 989px) {
    .ai-testimonial-showcase__grid-{{ ai_gen_id }} {
      grid-template-columns: repeat(2, 1fr);
    }

    .ai-testimonial-showcase__container-{{ ai_gen_id }} {
      padding: 0 20px;
    }
  }

  @media screen and (max-width: 749px) {
    .ai-testimonial-showcase__grid-{{ ai_gen_id }} {
      display: none;
    }

    .ai-testimonial-showcase__slider-{{ ai_gen_id }} {
      display: block;
    }

    .ai-testimonial-showcase__container-{{ ai_gen_id }} {
      padding: 0 15px;
    }

    .ai-testimonial-showcase__heading-{{ ai_gen_id }} {
      font-size: {{ block.settings.heading_size | times: 0.8 }}px;
    }
  }
{% endstyle %}

<div class="ai-testimonial-showcase-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-testimonial-showcase__container-{{ ai_gen_id }}">
    {% if block.settings.heading != blank %}
      <h2 class="ai-testimonial-showcase__heading-{{ ai_gen_id }}">
        {{ block.settings.heading }}
      </h2>
    {% endif %}

    <!-- Desktop Grid -->
    <div class="ai-testimonial-showcase__grid-{{ ai_gen_id }}">
      {% for i in (1..6) %}
        {% liquid
          assign image_key = 'testimonial_image_' | append: i
          assign enabled_key = 'show_testimonial_' | append: i
          assign testimonial_image = block.settings[image_key]
          assign is_enabled = block.settings[enabled_key]
        %}

        {% if is_enabled and testimonial_image %}
          <div class="ai-testimonial-showcase__card-{{ ai_gen_id }}">
            <div class="ai-testimonial-showcase__image-wrapper-{{ ai_gen_id }}">
              <img
                src="{{ testimonial_image | image_url: width: 800 }}"
                alt="{{ testimonial_image.alt | escape }}"
                loading="lazy"
                width="{{ testimonial_image.width }}"
                height="{{ testimonial_image.height }}"
                class="ai-testimonial-showcase__image-{{ ai_gen_id }}"
              >
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Mobile Slider -->
    <div class="ai-testimonial-showcase__slider-{{ ai_gen_id }}">
      <div class="ai-testimonial-showcase__slider-wrapper-{{ ai_gen_id }}">
        <div class="ai-testimonial-showcase__slider-track-{{ ai_gen_id }}" id="slider-track-{{ ai_gen_id }}">
          {% for i in (1..6) %}
            {% liquid
              assign image_key = 'testimonial_image_' | append: i
              assign enabled_key = 'show_testimonial_' | append: i
              assign testimonial_image = block.settings[image_key]
              assign is_enabled = block.settings[enabled_key]
            %}

            {% if is_enabled and testimonial_image %}
              <div class="ai-testimonial-showcase__slide-{{ ai_gen_id }}">
                <div class="ai-testimonial-showcase__card-{{ ai_gen_id }}">
                  <div class="ai-testimonial-showcase__image-wrapper-{{ ai_gen_id }}">
                    <img
                      src="{{ testimonial_image | image_url: width: 800 }}"
                      alt="{{ testimonial_image.alt | escape }}"
                      loading="lazy"
                      width="{{ testimonial_image.width }}"
                      height="{{ testimonial_image.height }}"
                      class="ai-testimonial-showcase__image-{{ ai_gen_id }}"
                    >
                  </div>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>

      <!-- Navigation: Arrow Left | Dots | Arrow Right -->
      <div class="ai-testimonial-showcase__navigation-{{ ai_gen_id }}">
        <button class="ai-testimonial-showcase__arrow-{{ ai_gen_id }}" id="prev-{{ ai_gen_id }}" aria-label="Previous testimonial">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
          </svg>
        </button>

        <div class="ai-testimonial-showcase__dots-{{ ai_gen_id }}" id="dots-{{ ai_gen_id }}"></div>

        <button class="ai-testimonial-showcase__arrow-{{ ai_gen_id }}" id="next-{{ ai_gen_id }}" aria-label="Next testimonial">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  (function() {
    const sliderId = '{{ ai_gen_id }}';
    const sliderTrack = document.getElementById('slider-track-' + sliderId);
    const dotsContainer = document.getElementById('dots-' + sliderId);
    const prevBtn = document.getElementById('prev-' + sliderId);
    const nextBtn = document.getElementById('next-' + sliderId);
    
    if (!sliderTrack) return;
    
    const slides = sliderTrack.querySelectorAll('.ai-testimonial-showcase__slide-' + sliderId);
    const totalSlides = slides.length;
    let currentIndex = 0;

    // Create dots
    for (let i = 0; i < totalSlides; i++) {
      const dot = document.createElement('button');
      dot.className = 'ai-testimonial-showcase__dot-' + sliderId;
      dot.setAttribute('aria-label', 'Go to testimonial ' + (i + 1));
      if (i === 0) dot.classList.add('active');
      dot.addEventListener('click', () => goToSlide(i));
      dotsContainer.appendChild(dot);
    }

    const dots = dotsContainer.querySelectorAll('.ai-testimonial-showcase__dot-' + sliderId);

    function updateSlider() {
      sliderTrack.style.transform = `translateX(-${currentIndex * 100}%)`;
      dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentIndex);
      });
    }

    function goToSlide(index) {
      currentIndex = index;
      updateSlider();
    }

    function nextSlide() {
      currentIndex = (currentIndex + 1) % totalSlides;
      updateSlider();
    }

    function prevSlide() {
      currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
      updateSlider();
    }

    prevBtn.addEventListener('click', prevSlide);
    nextBtn.addEventListener('click', nextSlide);

    // Touch support for swipe
    let touchStartX = 0;
    let touchEndX = 0;

    sliderTrack.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX;
    });

    sliderTrack.addEventListener('touchend', (e) => {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    });

    function handleSwipe() {
      if (touchEndX < touchStartX - 50) {
        nextSlide();
      }
      if (touchEndX > touchStartX + 50) {
        prevSlide();
      }
    }
  })();
</script>

{% schema %}
{
  "name": "Testimonial showcase",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Heading"
    },
    {
      "type": "inline_richtext",
      "id": "heading",
      "label": "Heading",
      "default": "What Our Customers Say"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 36
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "heading_spacing",
      "min": 10,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Spacing below heading",
      "default": 40
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "section_padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Section padding",
      "default": 50
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Grid gap",
      "default": 20
    },
    {
      "type": "range",
      "id": "image_aspect_ratio",
      "min": 50,
      "max": 150,
      "step": 5,
      "unit": "%",
      "label": "Image aspect ratio",
      "default": 100
    },
    {
      "type": "header",
      "content": "Border"
    },
    {
      "type": "range",
      "id": "border_width",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 1
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#E0E0E0"
    },
    {
      "type": "color",
      "id": "hover_border_color",
      "label": "Hover border color",
      "default": "#CCCCCC"
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 8
    },
    {
      "type": "header",
      "content": "Shadow"
    },
    {
      "type": "range",
      "id": "shadow_horizontal",
      "min": -20,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Horizontal offset",
      "default": 0
    },
    {
      "type": "range",
      "id": "shadow_vertical",
      "min": -20,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Vertical offset",
      "default": 4
    },
    {
      "type": "range",
      "id": "shadow_blur",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Blur radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "shadow_opacity",
      "min": 0,
      "max": 1,
      "step": 0.1,
      "label": "Shadow opacity",
      "default": 0
    },
    {
      "type": "header",
      "content": "Testimonial 1"
    },
    {
      "type": "checkbox",
      "id": "show_testimonial_1",
      "label": "Show testimonial 1",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "testimonial_image_1",
      "label": "Image"
    },
    {
      "type": "header",
      "content": "Testimonial 2"
    },
    {
      "type": "checkbox",
      "id": "show_testimonial_2",
      "label": "Show testimonial 2",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "testimonial_image_2",
      "label": "Image"
    },
    {
      "type": "header",
      "content": "Testimonial 3"
    },
    {
      "type": "checkbox",
      "id": "show_testimonial_3",
      "label": "Show testimonial 3",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "testimonial_image_3",
      "label": "Image"
    },
    {
      "type": "header",
      "content": "Testimonial 4"
    },
    {
      "type": "checkbox",
      "id": "show_testimonial_4",
      "label": "Show testimonial 4",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "testimonial_image_4",
      "label": "Image"
    },
    {
      "type": "header",
      "content": "Testimonial 5"
    },
    {
      "type": "checkbox",
      "id": "show_testimonial_5",
      "label": "Show testimonial 5",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "testimonial_image_5",
      "label": "Image"
    },
    {
      "type": "header",
      "content": "Testimonial 6"
    },
    {
      "type": "checkbox",
      "id": "show_testimonial_6",
      "label": "Show testimonial 6",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "testimonial_image_6",
      "label": "Image"
    }
  ],
  "presets": [
    {
      "name": "Testimonial showcase"
    }
  ]
}
{% endschema %}