{% doc %}
  @prompt
    Create a minimal, horizontally swipeable category filter bar for a fashion e-commerce website. Use a clean white background with a row of rectangular buttons labeled in uppercase sans-serif text (e.g., ALL, NEW, FORMAL, PRINTS, PLAIN, etc.). Each button has a thin black border and white fill, except the active one ('ALL'), which features a solid black background with white text.
    
    The filter bar should scroll horizontally (swipeable) on mobile and have smooth snap scrolling. Maintain equal spacing, rounded corners (small radius), and consistent padding. Add a subtle hover or active state transition that inverts colors. The style should feel premium, minimal, and fashion-forward, emphasizing clarity and usability., should be option for adding 20 Category and also in desktop version there should be option for alligment.  user will use this to navigate between collections , i click one but it redirecting me to a different collection
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-category-filter-{{ ai_gen_id }} {
    width: 100%;
    background-color: {{ block.settings.background_color }};
    padding: {{ block.settings.vertical_padding }}px 0;
  }

  .ai-category-filter-container-{{ ai_gen_id }} {
    width: 100%;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
    scroll-behavior: smooth;
    scroll-snap-type: x mandatory;
  }

  .ai-category-filter-container-{{ ai_gen_id }}::-webkit-scrollbar {
    display: none;
  }

  .ai-category-filter-list-{{ ai_gen_id }} {
    display: flex;
    gap: {{ block.settings.button_spacing }}px;
    padding: 0 {{ block.settings.horizontal_padding }}px;
    margin: 0;
    list-style: none;
    min-width: min-content;
  }

  @media screen and (min-width: 750px) {
    .ai-category-filter-list-{{ ai_gen_id }} {
      {% if block.settings.desktop_alignment == 'left' %}
        justify-content: flex-start;
      {% elsif block.settings.desktop_alignment == 'center' %}
        justify-content: center;
      {% elsif block.settings.desktop_alignment == 'right' %}
        justify-content: flex-end;
      {% endif %}
    }
  }

  .ai-category-filter-item-{{ ai_gen_id }} {
    scroll-snap-align: start;
    flex-shrink: 0;
  }

  .ai-category-filter-button-{{ ai_gen_id }} {
    display: inline-block;
    padding: {{ block.settings.button_padding_vertical }}px {{ block.settings.button_padding_horizontal }}px;
    background-color: {{ block.settings.button_bg_color }};
    color: {{ block.settings.button_text_color }};
    border: {{ block.settings.border_width }}px solid {{ block.settings.button_border_color }};
    border-radius: {{ block.settings.border_radius }}px;
    font-family: {{ block.settings.button_font.family }}, {{ block.settings.button_font.fallback_families }};
    font-weight: {{ block.settings.button_font.weight }};
    font-size: {{ block.settings.font_size }}px;
    text-transform: uppercase;
    text-decoration: none;
    letter-spacing: {{ block.settings.letter_spacing }}px;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
  }

  .ai-category-filter-button-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_bg_color }};
    color: {{ block.settings.button_hover_text_color }};
    border-color: {{ block.settings.button_hover_border_color }};
  }

  .ai-category-filter-button-{{ ai_gen_id }}.active {
    background-color: {{ block.settings.active_bg_color }};
    color: {{ block.settings.active_text_color }};
    border-color: {{ block.settings.active_border_color }};
  }

  .ai-category-filter-empty-{{ ai_gen_id }} {
    text-align: center;
    padding: 40px 20px;
    color: #999;
    font-size: 14px;
  }
{% endstyle %}

<category-filter-{{ ai_gen_id }}
  class="ai-category-filter-{{ ai_gen_id }}"
  {{ block.shopify_attributes }}
>
  {% assign has_categories = false %}
  {% for i in (1..20) %}
    {% assign category_label_key = 'category_' | append: i | append: '_label' %}
    {% assign category_collection_key = 'category_' | append: i | append: '_collection' %}
    {% assign category_label = block.settings[category_label_key] %}
    {% assign category_collection = block.settings[category_collection_key] %}
    
    {% if category_label != blank and category_collection != blank %}
      {% assign has_categories = true %}
      {% break %}
    {% endif %}
  {% endfor %}

  {% if has_categories %}
    <div class="ai-category-filter-container-{{ ai_gen_id }}">
      <ul class="ai-category-filter-list-{{ ai_gen_id }}">
        {% for i in (1..20) %}
          {% assign category_label_key = 'category_' | append: i | append: '_label' %}
          {% assign category_collection_key = 'category_' | append: i | append: '_collection' %}
          {% assign category_label = block.settings[category_label_key] %}
          {% assign category_collection = block.settings[category_collection_key] %}
          
          {% if category_label != blank and category_collection != blank %}
            <li class="ai-category-filter-item-{{ ai_gen_id }}">
              <a
                href="/collections/{{ category_collection.handle }}"
                class="ai-category-filter-button-{{ ai_gen_id }} {% if collection.handle == category_collection.handle %}active{% endif %}"
                data-collection-handle="{{ category_collection.handle }}"
              >
                {{ category_label }}
              </a>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    </div>
  {% else %}
    <div class="ai-category-filter-empty-{{ ai_gen_id }}">
      Add categories to display the filter bar
    </div>
  {% endif %}
</category-filter-{{ ai_gen_id }}>

<script>
  (function() {
    class CategoryFilter{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.container = this.querySelector('.ai-category-filter-container-{{ ai_gen_id }}');
        if (!this.container) return;

        this.setupScrollSnap();
        this.centerActiveButton();
      }

      setupScrollSnap() {
        let isDown = false;
        let startX;
        let scrollLeft;

        this.container.addEventListener('mousedown', (e) => {
          isDown = true;
          this.container.style.cursor = 'grabbing';
          startX = e.pageX - this.container.offsetLeft;
          scrollLeft = this.container.scrollLeft;
        });

        this.container.addEventListener('mouseleave', () => {
          isDown = false;
          this.container.style.cursor = 'grab';
        });

        this.container.addEventListener('mouseup', () => {
          isDown = false;
          this.container.style.cursor = 'grab';
        });

        this.container.addEventListener('mousemove', (e) => {
          if (!isDown) return;
          e.preventDefault();
          const x = e.pageX - this.container.offsetLeft;
          const walk = (x - startX) * 2;
          this.container.scrollLeft = scrollLeft - walk;
        });
      }

      centerActiveButton() {
        const activeButton = this.querySelector('.ai-category-filter-button-{{ ai_gen_id }}.active');
        if (!activeButton || !this.container) return;

        setTimeout(() => {
          const containerWidth = this.container.offsetWidth;
          const buttonLeft = activeButton.offsetLeft;
          const buttonWidth = activeButton.offsetWidth;
          const scrollPosition = buttonLeft - (containerWidth / 2) + (buttonWidth / 2);

          this.container.scrollTo({
            left: scrollPosition,
            behavior: 'smooth'
          });
        }, 100);
      }
    }

    customElements.define('category-filter-{{ ai_gen_id }}', CategoryFilter{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Category filter bar",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "desktop_alignment",
      "label": "Desktop alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "horizontal_padding",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Horizontal padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "vertical_padding",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Vertical padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "button_spacing",
      "min": 5,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Button spacing",
      "default": 12
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Button style"
    },
    {
      "type": "font_picker",
      "id": "button_font",
      "label": "Font",
      "default": "assistant_n4"
    },
    {
      "type": "range",
      "id": "font_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 13
    },
    {
      "type": "range",
      "id": "letter_spacing",
      "min": 0,
      "max": 3,
      "step": 0.5,
      "unit": "px",
      "label": "Letter spacing",
      "default": 0.5
    },
    {
      "type": "range",
      "id": "button_padding_vertical",
      "min": 5,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Vertical padding",
      "default": 10
    },
    {
      "type": "range",
      "id": "button_padding_horizontal",
      "min": 10,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Horizontal padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Border radius",
      "default": 4
    },
    {
      "type": "range",
      "id": "border_width",
      "min": 1,
      "max": 3,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 1
    },
    {
      "type": "header",
      "content": "Default button"
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Text",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_border_color",
      "label": "Border",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Hover state"
    },
    {
      "type": "color",
      "id": "button_hover_bg_color",
      "label": "Background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_border_color",
      "label": "Border",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Active state"
    },
    {
      "type": "color",
      "id": "active_bg_color",
      "label": "Background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "active_text_color",
      "label": "Text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "active_border_color",
      "label": "Border",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Category 1"
    },
    {
      "type": "text",
      "id": "category_1_label",
      "label": "Label",
      "default": "ALL"
    },
    {
      "type": "collection",
      "id": "category_1_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 2"
    },
    {
      "type": "text",
      "id": "category_2_label",
      "label": "Label",
      "default": "NEW"
    },
    {
      "type": "collection",
      "id": "category_2_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 3"
    },
    {
      "type": "text",
      "id": "category_3_label",
      "label": "Label",
      "default": "FORMAL"
    },
    {
      "type": "collection",
      "id": "category_3_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 4"
    },
    {
      "type": "text",
      "id": "category_4_label",
      "label": "Label",
      "default": "PRINTS"
    },
    {
      "type": "collection",
      "id": "category_4_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 5"
    },
    {
      "type": "text",
      "id": "category_5_label",
      "label": "Label",
      "default": "PLAIN"
    },
    {
      "type": "collection",
      "id": "category_5_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 6"
    },
    {
      "type": "text",
      "id": "category_6_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_6_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 7"
    },
    {
      "type": "text",
      "id": "category_7_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_7_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 8"
    },
    {
      "type": "text",
      "id": "category_8_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_8_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 9"
    },
    {
      "type": "text",
      "id": "category_9_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_9_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 10"
    },
    {
      "type": "text",
      "id": "category_10_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_10_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 11"
    },
    {
      "type": "text",
      "id": "category_11_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_11_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 12"
    },
    {
      "type": "text",
      "id": "category_12_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_12_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 13"
    },
    {
      "type": "text",
      "id": "category_13_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_13_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 14"
    },
    {
      "type": "text",
      "id": "category_14_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_14_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 15"
    },
    {
      "type": "text",
      "id": "category_15_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_15_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 16"
    },
    {
      "type": "text",
      "id": "category_16_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_16_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 17"
    },
    {
      "type": "text",
      "id": "category_17_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_17_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 18"
    },
    {
      "type": "text",
      "id": "category_18_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_18_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 19"
    },
    {
      "type": "text",
      "id": "category_19_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_19_collection",
      "label": "Collection"
    },
    {
      "type": "header",
      "content": "Category 20"
    },
    {
      "type": "text",
      "id": "category_20_label",
      "label": "Label"
    },
    {
      "type": "collection",
      "id": "category_20_collection",
      "label": "Collection"
    }
  ],
  "presets": [
    {
      "name": "Category filter bar"
    }
  ]
}
{% endschema %}
